<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TwoRavens</title>
        
        <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
        
        <link rel="stylesheet" href="app.css">
        <link rel="stylesheet" href="Ladda/dist/ladda-themeless.min.css">
            
        <script src="Ladda/dist/spin.min.js"></script>
        <script src="Ladda/dist/ladda.min.js"></script>
        
        <script type="text/javascript" src="jquery/jquery.min.js"></script>
        <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
        
        <script type="text/javascript" src="d3.v3.min.js"></script>
        <script type="text/javascript" src="plots.js"></script>
  </head>
  
<!--svg id="accidents">
<defs>
   <linearGradient id="fade" x1="0%" y1="50%" x2="50%" y2="100%">
     <stop offset="0%" style="stop-color:#F5A9A9" />
     <stop offset="100%" style="stop-color:#D8F6CE" />
   </linearGradient>
</defs>
</svg-->

  <body>
      
    <nav id="option" class="navbar navbar-default" role="navigation">
          <div>
              <div class="navbar-header" onmouseover="about();" onmouseout="closeabout();" >
                  <img src="images/TwoRavens.png" alt="TwoRavens" width="100" style="margin-left:2em;margin-top:-0.5em">
                  <div id="about" style="position:absolute;height:170px;width:380px;padding:2px;background-color:white; border:1px solid red; display:none; z-index:10;">        
                  </div>
              </div>
                 
              <div class="field" id="datasetName" style="text-align:center;margin-top:0.5em">
                  <h4 style="display:inline;">Dataset Name</h4>

                  <button class="btn btn-default" id="makeTable" title="Make Table" style="margin-left:1em;"><span style="font-size:1em;color:#818181; pointer-events:none;" class="glyphicon glyphicon-list-alt"></span></button>
<!--
                  <span class="btn-group" style="margin-left:0.3em;">
                    <button class="btn active" id="btnD1" title="Conifer" onclick="toggleData('btnD1');"><span style="font-size:1em;color:#818181; pointer-events:none;" class="glyphicon glyphicon-tree-conifer"></span></button>
                    <button class="btn btn-default" id="btnD2" title="Deciduous" onclick="toggleData('btnD2');"><span style="font-size:1em;color:#818181; pointer-events:none;" class="glyphicon glyphicon-tree-deciduous"></span></button>
                  </span>
-->
                  <button class="btn btn-default ladda-button navbar-right" style="margin-left:2em;margin-right:1em;" id="btnEstimate" onclick="estimate('btnEstimate')" data-spinner-color="#000000" data-style="zoom-in"><span class="ladda-label">Estimate</span></button>
                  <button class="btn btn-default navbar-right" id="btnReset" title="Reset" onclick="reset()" style="margin-right:1.0em;"><span style="font-size:1em;color:#818181; pointer-events:none;" class="glyphicon glyphicon-repeat"></span></button>
                <!--  previous location of Force and Reset icons  -->
              </div>  
          </div>
      </nav>
    
    <div class="left svg-leftpanel svg-rightpanel carousel slide" id="main" style="position:relative;">
        
        <!-- LINKED CAROUSEL NAV -->
        <!--<ol class="carousel-linked-nav pagination clearfix">
            <li><a href="#remove"><span class="glyphicon glyphicon-minus"></span></a></li>
            <li class="active"><a href="#1">&#9679;</a></li>
            <li><a href="#create"><span class="glyphicon glyphicon-plus"></span></a></li>
        </ol>-->
        <ol class="carousel-indicators">
            <li id="delete"><a href="#delete"><span class="glyphicon glyphicon-minus"></span></a></li>
            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            <li id="create"><a href="#create"><span class="glyphicon glyphicon-plus"></span></a></li>
        </ol>
        
        <!-- Carousel items -->
        <div class="carousel-inner">
            <!--<div class="active item">
                <img src="http://placehold.it/300x200/888&text=Item 1" />
            </div>
            <div class="item">
                <img src="http://placehold.it/300x200/aaa&text=Item 2" />
            </div>
            <div class="item">
                <img src="http://placehold.it/300x200/444&text=Item 3" />
            </div>-->
        </div>
        
        <div id="transformations" class="transformTool" style="display:block; z-index:17;">
        </div>
        
        <div id="spacetools" class="spaceTool" style="z-index:16;">
            <button class="btn btn-default" id="btnForce" title="Force" onclick="forceSwitch()"><span class="glyphicon glyphicon-pushpin"></span></button>
            <button class="btn btn-default" id="btnEraser" title="Erase" onclick="erase()"><span class="glyphicon glyphicon-magnet"></span></button>
        </div>
        
        <div id="legend" class="legendary panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Legend</h3>
            </div>
            <div class="panel-body">
                <div id="timeButton" class="clearfix hide">
                    <div class="rectColor"></div> <div class="rectLabel">Time</div>
                </div>
                <div id="csButton" class="clearfix hide">
                    <div class="rectColor"></div> <div class="rectLabel">Cross Sec</div>
                </div>
                <div id="dvButton" class="clearfix hide">
                    <div class="rectColor"></div> <div class="rectLabel">Dep Var</div>
                </div>
                <div id="nomButton" class="clearfix hide">
                    <div class="rectColor"></div> <div class="rectLabel">Nom Var</div>
                </div>
            </div>
        </div>
        
        <div id="ticker" style="position:fixed;height:50px;width:100%;background:#F9F9F9;bottom:0;"></div>
        
        <!--<div id="tooltip" style="display: none;">
         <h3 class="popover-title">Summary Statistics</h3>
         <div id="tooltiptext" class="popover-content form-horizontal"></div>
         </div>-->
        
        <div id="leftpanel" class="container" style="height:578px;position:absolute;top:10px;left:10px;background:#F9F9F9;padding-top:.5em; z-index:25;">
            
            <div id="toggleLpanelicon"><span style="top:-1px;vertical-align:top;font-size:2em;color:#ADADAD;" class="glyphicon glyphicon-chevron-left"></span></div>
            
            <div class="btn-toolbar" role="toolbar" style="margin-left:10px;">
                <div class="btn-group" style="margin-left:0;">
                    <button type="button" class="btn active" id="btnPanel1" onclick="lefttab='tab1'; subsetOff(); tabLeft('tab1');">Variables</button>
                    <button type="button" class="btn btn-default" id="btnPanel2" onclick="lefttab='tab2'; subset(); tabLeft('tab2');">Subset</button>
                    <button type="button" class="btn btn-default" id="btnPanel3" onclick="lefttab='tab3'; subsetOff(); tabLeft('tab3');">Sum.</button>
                </div>
            </div>
            <div class="row-fluid">
                <div id="leftpanelcontent">
                    <div id="leftContentArea" style="overflow: scroll; height:488px;">
                        <div id="tab1" style="display:block;padding:6px 12px;text-align:center"></div>
                        <div id="tab2" style="display:none;">
                            <button type="button" class="btn btn-default ladda-button" id="btnSelect" style="display:none;" onclick="subsetSelect('btnSelect');" data-spinner-color="#000000" data-style="zoom-in"><span class="ladda-label">Select</span></button>
                        </div>
                        <div id="tab3">
                            <p style="padding:.5em 1em;">Select a variable from within the visualization in the center panel to view its summary statistics.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="rightpanel" class="container" style="height:578px; position:absolute;top:10px;right:10px;background:#F9F9F9;padding-top:.5em; z-index:25;">
            
            <div id="toggleRpanelicon"><span style="top:2px;vertical-align:top;font-size:2em;color:#ADADAD;" class="glyphicon glyphicon-chevron-right"></span></div>
         
         <div class="btn-toolbar" role="toolbar" style="margin-left:0;">
             <div class="btn-group" style="margin-left:0;">
                 <button type="button" class="btn active" id="btnModels" onclick="righttab='models'; setxOff(); tabRight('btnModels');">Models</button>
                 <button type="button" class="btn btn-default" id="btnSetx" onclick="righttab='setx'; setx(); tabRight('btnSetx');">Set Covar.</button>
                 <button type="button" class="btn btn-default" id="btnResults" onclick="resultsView();">Results</button>
             </div>
         </div>
         
         
        <!--    <ul class="nav nav-tabs nav-justified">
                <li class="active"><a id="btnModels" onclick="righttab='models'; setxOff(); tabRight('btnModels');">Models</a></li>
                <li><a id="btnSetx" onclick="righttab='setx'; setx(); tabRight('btnSetx');">Set Covar.</a></li>
                <li><a id="btnResults" onclick="resultsView();">Results</a></li>
            </ul>
         -->
            <div class="row-fluid">
                <div id="rightpanelcontent">
                    <div id="rightContentArea" style="overflow:scroll; height:488px;">
                        <div id="resultsView" style="width:100%; background-color:white; display:none;"></div>
                        <div id="results">
                            <p id="resultsHolder" style="padding:.5em 1em;">No results available until a model is estimated.</p>
                        </div>
                        <div id="setx" style="display:none;"></div>
                        <div id="models" style="display:block;padding:6px 12px;text-align:center;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="clearfix"></div>

    </div>

<script>
    
    /* initially hide panels */
//    $('#panel2').hide();

    // invoke the carousel
    $('#main').carousel({
        interval: false /* AUTOPLAY REMOVED */
    });
  
    /* SLIDE ON CLICK */
  
    $('ol.carousel-linked-nav > li > a').click(function() {
       // grab href, remove pound sign, convert to number
       var item = Number($(this).attr('href').substring(1));
       
       // slide to number -1 (account for zero indexing)
       $('#main').carousel(item - 1);
       
       // remove current active class
       $('ol.carousel-linked-nav li.active').removeClass('active');
       
       // add active class to just clicked on item
       $(this).parent().addClass('active');
       
       // don't follow the link
       return false;
     });

  // Open/Close Panels
  $('#leftpanel span.glyphicon').click(function(){
      closeLeftPanel();
  });
  $('#rightpanel span.glyphicon').click(function(){
      closeRightPanel();
  });
  
  function closeLeftPanel() {
      if ($('#leftpanel').hasClass('forceclosepanel')) {
        // do nothing
      } else {
          /*$('#leftpanel .btn-toolbar').hide();*/
          $('#leftpanel').removeClass('expandpanel');
          $('#leftpanel > div.row-fluid').toggleClass('closepanel');
          $('#leftpanel').toggleClass('closepanel');
          $('#main').toggleClass('svg-leftpanel');
          $('#btnSelect').css('display','none');
      }
  };
  function closeRightPanel() {
      if ($('#leftpanel').hasClass('forceclosepanel')) {
        // do nothing
      } else {
      /*$('#rightpanel .nav-tabs').hide();*/
      $('#rightpanel').removeClass('expandpanel');
      $('#rightpanel > div.row-fluid').toggleClass('closepanel');
      $('#rightpanel').toggleClass('closepanel');
      $('#main').toggleClass('svg-rightpanel');
      }
  };

  var myurl=window.location.toString();
  var fileid="";
  var cindex=0;
  if (myurl.indexOf("dfId=") > 0) {
    fileid=myurl.substring(myurl.indexOf("dfId=")+5);
    cindex=fileid.indexOf("&");
    if (cindex > 0) {
      fileid=fileid.substring(0,cindex);
    };
  };
  var hostname="";
  if (myurl.indexOf("host=") > 0) {
    hostname=myurl.substring(myurl.indexOf("host=")+5);
    cindex=hostname.indexOf("&");
    if (cindex > 0) {
      hostname=hostname.substring(0,cindex);
    };
  };

  console.log("fileid: "+fileid);
  console.log("hostname: "+hostname);
  
</script>
<script src="app_ddi.js"></script>

  </body>
</html>

